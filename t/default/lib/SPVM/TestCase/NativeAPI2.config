use strict;
use warnings;
use Data::Dumper;

use SPVM::Builder::Config;

my $config = SPVM::Builder::Config->new_gnu99;

$config->use('Unicode');

$config->optimize('-O2');

if ($ENV{SPVM_TEST_CONFIG_FORCE}) {
  $config->force(1);
}

$config->before_link(sub {
  my ($config, $objects) = @_;
  
  warn Dumper $objects;
  
  return $objects;
});

$config->add_source_files('foo.c', 'bar.c', 'baz/baz.c');

$config;
