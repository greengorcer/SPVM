class TestCase::Errno {
  use Point;
  static method basic : int () {
    {
      set_error_code 5;
      unless (errno == 5) {
        return 0;
      }
      set_error_code 6;
      eval {
        die;
      };
      unless (errno == 6) {
        return 0;
      }
    }
    
    
    {
      set_error_code 7;
      &foo();
      unless (errno == 7) {
        return 0;
      }
      set_error_code 8;
      eval {
        &foo_die();
      };
      unless (errno == 9) {
        return 0;
      }
      set_error_code 900;
      eval {
        &foo_bar_die();
      };
      unless (errno == 100) {
        return 0;
      }
    }
    
    $@ = undef;
    
    return 1;
  }
  
  static method foo : int () {
    set_error_code 12;
  }
  
  static method foo_die : int () {
    set_error_code 9;
    die;
  }

  static method foo_bar_die : int () {
    set_error_code 200;
    &bar_die;
  }
  
  static method bar_die : int () {
    set_error_code 100;
    die "Died at bar_die";
  }
}
